<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2">























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="HTTP 简介HTTP协议是Hyper Text Transfer Protocol（超文本传输协议）的缩写,是用于从万维网服务器传输超文本到本地浏览器的传送协议。 HTTP是一个基于TCP/IP通信协议来传递数据（HTML 文件, 图片文件, 查询结果等）。 HTTP 工作原理HTTP协议工作于客户端-服务端架构上。浏览器作为HTTP客户端通过URL向HTTP服务端即WEB服务器发送所有请求。">
<meta name="keywords" content="http web">
<meta property="og:type" content="article">
<meta property="og:title" content="http协议">
<meta property="og:url" content="https://huang-junjie.github.io/2019/04/16/http协议/index.html">
<meta property="og:site_name" content="Huangjj">
<meta property="og:description" content="HTTP 简介HTTP协议是Hyper Text Transfer Protocol（超文本传输协议）的缩写,是用于从万维网服务器传输超文本到本地浏览器的传送协议。 HTTP是一个基于TCP/IP通信协议来传递数据（HTML 文件, 图片文件, 查询结果等）。 HTTP 工作原理HTTP协议工作于客户端-服务端架构上。浏览器作为HTTP客户端通过URL向HTTP服务端即WEB服务器发送所有请求。">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2013/11/2012072810301161.png">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2013/11/httpmessage.jpg">
<meta property="og:image" content="https://segmentfault.com/img/remote/1460000013028803?w=869&h=585">
<meta property="og:image" content="https://segmentfault.com/img/remote/1460000014217953?w=581&h=292">
<meta property="og:image" content="https://segmentfault.com/img/remote/1460000013028804?w=625&h=324">
<meta property="og:image" content="https://segmentfault.com/img/remote/1460000013028805?w=479&h=391">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/9294298-c88d2dd40510eddb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/648/format/webp">
<meta property="og:updated_time" content="2019-05-28T14:52:21.670Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="http协议">
<meta name="twitter:description" content="HTTP 简介HTTP协议是Hyper Text Transfer Protocol（超文本传输协议）的缩写,是用于从万维网服务器传输超文本到本地浏览器的传送协议。 HTTP是一个基于TCP/IP通信协议来传递数据（HTML 文件, 图片文件, 查询结果等）。 HTTP 工作原理HTTP协议工作于客户端-服务端架构上。浏览器作为HTTP客户端通过URL向HTTP服务端即WEB服务器发送所有请求。">
<meta name="twitter:image" content="http://www.runoob.com/wp-content/uploads/2013/11/2012072810301161.png">






  <link rel="canonical" href="https://huang-junjie.github.io/2019/04/16/http协议/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>http协议 | Huangjj</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Huangjj</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://huang-junjie.github.io/2019/04/16/http协议/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="HuangJunjie">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Huangjj">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">http协议

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-16 16:23:52" itemprop="dateCreated datePublished" datetime="2019-04-16T16:23:52+08:00">2019-04-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-28 22:52:21" itemprop="dateModified" datetime="2019-05-28T22:52:21+08:00">2019-05-28</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">11k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">10 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="HTTP-简介"><a href="#HTTP-简介" class="headerlink" title="HTTP 简介"></a>HTTP 简介</h2><p>HTTP协议是Hyper Text Transfer Protocol（超文本传输协议）的缩写,是用于从万维网服务器传输超文本到本地浏览器的传送协议。</p>
<p>HTTP是一个基于TCP/IP通信协议来传递数据（HTML 文件, 图片文件, 查询结果等）。</p>
<h2 id="HTTP-工作原理"><a href="#HTTP-工作原理" class="headerlink" title="HTTP 工作原理"></a>HTTP 工作原理</h2><p>HTTP协议工作于客户端-服务端架构上。浏览器作为HTTP客户端通过URL向HTTP服务端即WEB服务器发送所有请求。</p>
<p>Web服务器有：Apache服务器，IIS服务器（Internet Information Services）等。</p>
<p>Web服务器根据接收到的请求后，向客户端发送响应信息。</p>
<p>HTTP默认端口号为80，但是你也可以改为8080或者其他端口。</p>
<h2 id="HTTP-消息结构"><a href="#HTTP-消息结构" class="headerlink" title="HTTP 消息结构"></a>HTTP 消息结构</h2><h3 id="客户端请求消息"><a href="#客户端请求消息" class="headerlink" title="客户端请求消息"></a>客户端请求消息</h3><p>客户端发送一个HTTP请求到服务器的请求消息包括以下格式：请求行（request line）、请求头部（header）、空行和请求数据四个部分组成，下图给出了请求报文的一般格式。</p>
<p><img src="http://www.runoob.com/wp-content/uploads/2013/11/2012072810301161.png" alt></p>
<h3 id="服务器响应消息"><a href="#服务器响应消息" class="headerlink" title="服务器响应消息"></a>服务器响应消息</h3><p>HTTP响应也由四个部分组成，分别是：状态行、消息报头、空行和响应正文。<br><img src="http://www.runoob.com/wp-content/uploads/2013/11/httpmessage.jpg" alt></p>
<h2 id="HTTP状态码"><a href="#HTTP状态码" class="headerlink" title="HTTP状态码"></a>HTTP状态码</h2><p>当浏览者访问一个网页时，浏览者的浏览器会向网页所在服务器发出请求。当浏览器接收并显示网页前，此网页所在的服务器会返回一个包含HTTP状态码的信息头（server header）用以响应浏览器的请求。</p>
<h3 id="HTTP状态码分类"><a href="#HTTP状态码分类" class="headerlink" title="HTTP状态码分类"></a>HTTP状态码分类</h3><p>HTTP状态码由三个十进制数字组成，第一个十进制数字定义了状态码的类型，后两个数字没有分类的作用。HTTP状态码共分为5种类型：</p>
<table>
<thead>
<tr>
<th style="text-align:left">分类</th>
<th style="text-align:left">分类描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1**</td>
<td style="text-align:left">信息，服务器收到请求，需要请求者继续执行操作</td>
</tr>
<tr>
<td style="text-align:left">2**</td>
<td style="text-align:left">成功，操作被成功接收并处理</td>
</tr>
<tr>
<td style="text-align:left">3**</td>
<td style="text-align:left">重定向，需要进一步的操作以完成请求</td>
</tr>
<tr>
<td style="text-align:left">4**</td>
<td style="text-align:left">客户端错误，请求包含语法错误或无法完成请求</td>
</tr>
<tr>
<td style="text-align:left">5**</td>
<td style="text-align:left">服务器错误，服务器在处理请求的过程中发生了错误</td>
</tr>
</tbody>
</table>
<h3 id="常见HTTP状态码列表"><a href="#常见HTTP状态码列表" class="headerlink" title="常见HTTP状态码列表"></a>常见HTTP状态码列表</h3><table>
<thead>
<tr>
<th style="text-align:left">状态码</th>
<th style="text-align:left">状态码英文名称</th>
<th style="text-align:left">中文描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">100</td>
<td style="text-align:left">Continue</td>
<td style="text-align:left">继续。客户端应继续其请求</td>
</tr>
<tr>
<td style="text-align:left">101</td>
<td style="text-align:left">Switching Protocols</td>
<td style="text-align:left">切换协议。服务器根据客户端的请求切换协议。只能切换到更高级的协议，例如，切换到HTTP的新版本协议</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">200</td>
<td style="text-align:left">OK</td>
<td style="text-align:left">请求成功。一般用于GET与POST请求</td>
</tr>
<tr>
<td style="text-align:left">206</td>
<td style="text-align:left">Partial Content</td>
<td style="text-align:left">部分内容。服务器成功处理了部分GET请求</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">300</td>
<td style="text-align:left">Multiple Choices</td>
<td style="text-align:left">多种选择。请求的资源可包括多个位置，相应可返回一个资源特征与地址的列表用于用户终端（例如：浏览器）选择</td>
</tr>
<tr>
<td style="text-align:left">301</td>
<td style="text-align:left">Moved Permanently</td>
<td style="text-align:left">永久移动。请求的资源已被永久的移动到新URI，返回信息会包括新的URI，浏览器会自动定向到新URI。今后任何新的请求都应使用新的URI代替</td>
</tr>
<tr>
<td style="text-align:left">302</td>
<td style="text-align:left">Found</td>
<td style="text-align:left">临时移动。与301类似。但资源只是临时被移动。客户端应继续使用原有URI</td>
</tr>
<tr>
<td style="text-align:left">303</td>
<td style="text-align:left">See Other</td>
<td style="text-align:left">查看其它地址。与301类似。使用GET和POST请求查看</td>
</tr>
<tr>
<td style="text-align:left">304</td>
<td style="text-align:left">Not Modified</td>
<td style="text-align:left">未修改。所请求的资源未修改，服务器返回此状态码时，不会返回任何资源。客户端通常会缓存访问过的资源，通过提供一个头信息指出客户端希望只返回在指定日期之后修改的资源</td>
</tr>
<tr>
<td style="text-align:left">307</td>
<td style="text-align:left">Temporary Redirect</td>
<td style="text-align:left">临时重定向。与302类似。使用GET请求重定向</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">400</td>
<td style="text-align:left">Bad Request</td>
<td style="text-align:left">客户端请求的语法错误，服务器无法理解</td>
</tr>
<tr>
<td style="text-align:left">401</td>
<td style="text-align:left">Unauthorized</td>
<td style="text-align:left">请求要求用户的身份认证</td>
</tr>
<tr>
<td style="text-align:left">402</td>
<td style="text-align:left">Payment Required</td>
<td style="text-align:left">保留，将来使用</td>
</tr>
<tr>
<td style="text-align:left">403</td>
<td style="text-align:left">Forbidden</td>
<td style="text-align:left">服务器理解请求客户端的请求，但是拒绝执行此请求</td>
</tr>
<tr>
<td style="text-align:left">404</td>
<td style="text-align:left">Not Found</td>
<td style="text-align:left">服务器无法根据客户端的请求找到资源（网页）。通过此代码，网站设计人员可设置”您所请求的资源无法找到”的个性页面</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">500</td>
<td style="text-align:left">Internal Server Error</td>
<td style="text-align:left">服务器内部错误，无法完成请求</td>
</tr>
<tr>
<td style="text-align:left">501</td>
<td style="text-align:left">Not Implemented</td>
<td style="text-align:left">服务器不支持请求的功能，无法完成请求</td>
</tr>
</tbody>
</table>
<h3 id="常用的HTTP请求头"><a href="#常用的HTTP请求头" class="headerlink" title="常用的HTTP请求头"></a>常用的HTTP请求头</h3><table>
<thead>
<tr>
<th style="text-align:left">请求头</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">示例</th>
<th style="text-align:left">状态</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Accept</td>
<td style="text-align:left">可接受的响应内容类型（<code>Content-Types</code>）。</td>
<td style="text-align:left"><code>Accept: text/plain</code></td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">Accept-Charset</td>
<td style="text-align:left">可接受的字符集</td>
<td style="text-align:left"><code>Accept-Charset: utf-8</code></td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">Accept-Encoding</td>
<td style="text-align:left">可接受的响应内容的编码方式。</td>
<td style="text-align:left"><code>Accept-Encoding: gzip, deflate</code></td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">Accept-Language</td>
<td style="text-align:left">可接受的响应内容语言列表。</td>
<td style="text-align:left"><code>Accept-Language: en-US</code></td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">Accept-Datetime</td>
<td style="text-align:left">可接受的按照时间来表示的响应内容版本</td>
<td style="text-align:left">Accept-Datetime: Sat, 26 Dec 2015 17:30:00 GMT</td>
<td style="text-align:left">临时</td>
</tr>
<tr>
<td style="text-align:left">Authorization</td>
<td style="text-align:left">用于表示HTTP协议中需要认证资源的认证信息</td>
<td style="text-align:left">Authorization: Basic OSdjJGRpbjpvcGVuIANlc2SdDE==</td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">Cache-Control</td>
<td style="text-align:left">用来指定当前的请求/回复中的，是否使用缓存机制。</td>
<td style="text-align:left"><code>Cache-Control: no-cache</code></td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">Connection</td>
<td style="text-align:left">客户端（浏览器）想要优先使用的连接类型</td>
<td style="text-align:left"><code>Connection: keep-alive</code> <code>Connection: Upgrade</code></td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">Cookie</td>
<td style="text-align:left">由之前服务器通过<code>Set-Cookie</code>（见下文）设置的一个HTTP协议Cookie</td>
<td style="text-align:left"><code>Cookie: $Version=1; Skin=new;</code></td>
<td style="text-align:left">固定：标准</td>
</tr>
<tr>
<td style="text-align:left">Content-Length</td>
<td style="text-align:left">以8进制表示的请求体的长度</td>
<td style="text-align:left"><code>Content-Length: 348</code></td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">Content-MD5</td>
<td style="text-align:left">请求体的内容的二进制 MD5 散列值（数字签名），以 Base64 编码的结果</td>
<td style="text-align:left">Content-MD5: oD8dH2sgSW50ZWdyaIEd9D==</td>
<td style="text-align:left">废弃</td>
</tr>
<tr>
<td style="text-align:left">Content-Type</td>
<td style="text-align:left">请求体的MIME类型 （用于POST和PUT请求中）</td>
<td style="text-align:left">Content-Type: application/x-www-form-urlencoded</td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">Date</td>
<td style="text-align:left">发送该消息的日期和时间（以<a href="http://tools.ietf.org/html/rfc7231#section-7.1.1.1" target="_blank" rel="noopener">RFC 7231</a>中定义的”HTTP日期”格式来发送）</td>
<td style="text-align:left">Date: Dec, 26 Dec 2015 17:30:00 GMT</td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">Expect</td>
<td style="text-align:left">表示客户端要求服务器做出特定的行为</td>
<td style="text-align:left"><code>Expect: 100-continue</code></td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">From</td>
<td style="text-align:left">发起此请求的用户的邮件地址</td>
<td style="text-align:left"><code>From: user@itbilu.com</code></td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">Host</td>
<td style="text-align:left">表示服务器的域名以及服务器所监听的端口号。如果所请求的端口是对应的服务的标准端口（80），则端口号可以省略。</td>
<td style="text-align:left"><code>Host: www.itbilu.com:80</code> <code>Host: www.itbilu.com</code></td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">If-Match</td>
<td style="text-align:left">仅当客户端提供的实体与服务器上对应的实体相匹配时，才进行对应的操作。主要用于像 PUT 这样的方法中，仅当从用户上次更新某个资源后，该资源未被修改的情况下，才更新该资源。</td>
<td style="text-align:left">If-Match: “9jd00cdj34pss9ejqiw39d82f20d0ikd”</td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">If-Modified-Since</td>
<td style="text-align:left">允许在对应的资源未被修改的情况下返回304未修改</td>
<td style="text-align:left">If-Modified-Since: Dec, 26 Dec 2015 17:30:00 GMT</td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">If-None-Match</td>
<td style="text-align:left">允许在对应的内容未被修改的情况下返回304未修改（ 304 Not Modified ），参考 超文本传输协议 的实体标记</td>
<td style="text-align:left">If-None-Match: “9jd00cdj34pss9ejqiw39d82f20d0ikd”</td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">If-Range</td>
<td style="text-align:left">如果该实体未被修改过，则向返回所缺少的那一个或多个部分。否则，返回整个新的实体</td>
<td style="text-align:left">If-Range: “9jd00cdj34pss9ejqiw39d82f20d0ikd”</td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">If-Unmodified-Since</td>
<td style="text-align:left">仅当该实体自某个特定时间以来未被修改的情况下，才发送回应。</td>
<td style="text-align:left">If-Unmodified-Since: Dec, 26 Dec 2015 17:30:00 GMT</td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">Max-Forwards</td>
<td style="text-align:left">限制该消息可被代理及网关转发的次数。</td>
<td style="text-align:left"><code>Max-Forwards: 10</code></td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">Origin</td>
<td style="text-align:left">发起一个针对<a href="http://itbilu.com/javascript/js/VkiXuUcC.html" target="_blank" rel="noopener">跨域资源共享</a>的请求（该请求要求服务器在响应中加入一个<code>Access-Control-Allow-Origin</code>的消息头，表示访问控制所允许的来源）。</td>
<td style="text-align:left"><code>Origin: http://www.itbilu.com</code></td>
<td style="text-align:left">固定: 标准</td>
</tr>
<tr>
<td style="text-align:left">Pragma</td>
<td style="text-align:left">与具体的实现相关，这些字段可能在请求/回应链中的任何时候产生。</td>
<td style="text-align:left"><code>Pragma: no-cache</code></td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">Proxy-Authorization</td>
<td style="text-align:left">用于向代理进行认证的认证信息。</td>
<td style="text-align:left">Proxy-Authorization: Basic IOoDZRgDOi0vcGVuIHNlNidJi2==</td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">Range</td>
<td style="text-align:left">表示请求某个实体的一部分，字节偏移以0开始。</td>
<td style="text-align:left"><code>Range: bytes=500-999</code></td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">Referer</td>
<td style="text-align:left">表示浏览器所访问的前一个页面，可以认为是之前访问页面的链接将浏览器带到了当前页面。<code>Referer</code>其实是<code>Referrer</code>这个单词，但RFC制作标准时给拼错了，后来也就将错就错使用<code>Referer</code>了。</td>
<td style="text-align:left">Referer: <a href="http://itbilu.com/nodejs" target="_blank" rel="noopener">http://itbilu.com/nodejs</a></td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">TE</td>
<td style="text-align:left">浏览器预期接受的传输时的编码方式：可使用回应协议头<code>Transfer-Encoding</code>中的值（还可以使用”trailers”表示数据传输时的分块方式）用来表示浏览器希望在最后一个大小为0的块之后还接收到一些额外的字段。</td>
<td style="text-align:left"><code>TE: trailers,deflate</code></td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">User-Agent</td>
<td style="text-align:left">浏览器的身份标识字符串</td>
<td style="text-align:left"><code>User-Agent: Mozilla/……</code></td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">Upgrade</td>
<td style="text-align:left">要求服务器升级到一个高版本协议。</td>
<td style="text-align:left">Upgrade: HTTP/2.0, SHTTP/1.3, IRC/6.9, RTA/x11</td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">Via</td>
<td style="text-align:left">告诉服务器，这个请求是由哪些代理发出的。</td>
<td style="text-align:left">Via: 1.0 fred, 1.1 itbilu.com.com (Apache/1.1)</td>
<td style="text-align:left">固定</td>
</tr>
<tr>
<td style="text-align:left">Warning</td>
<td style="text-align:left">一个一般性的警告，表示在实体内容体中可能存在错误。</td>
<td style="text-align:left">Warning: 199 Miscellaneous warning</td>
<td style="text-align:left">固定</td>
</tr>
</tbody>
</table>
<h3 id="常用的HTTP响应头"><a href="#常用的HTTP响应头" class="headerlink" title="常用的HTTP响应头"></a>常用的HTTP响应头</h3><table>
<thead>
<tr>
<th style="text-align:left">响应头</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Allow</td>
<td style="text-align:left">服务器支持哪些请求方法（如GET、POST等）。</td>
</tr>
<tr>
<td style="text-align:left">Content-Encoding</td>
<td style="text-align:left">文档的编码（Encode）方法。只有在解码之后才可以得到Content-Type头指定的内容类型。利用gzip压缩文档能够显著地减少HTML文档的下载时间。Java的GZIPOutputStream可以很方便地进行gzip压缩，但只有Unix上的Netscape和Windows上的IE 4、IE 5才支持它。因此，Servlet应该通过查看Accept-Encoding头（即request.getHeader(“Accept-Encoding”)）检查浏览器是否支持gzip，为支持gzip的浏览器返回经gzip压缩的HTML页面，为其他浏览器返回普通页面。</td>
</tr>
<tr>
<td style="text-align:left">Content-Length</td>
<td style="text-align:left">表示内容长度。只有当浏览器使用持久HTTP连接时才需要这个数据。如果你想要利用持久连接的优势，可以把输出文档写入 ByteArrayOutputStream，完成后查看其大小，然后把该值放入Content-Length头，最后通过byteArrayStream.writeTo(response.getOutputStream()发送内容。</td>
</tr>
<tr>
<td style="text-align:left">Content-Type</td>
<td style="text-align:left">表示后面的文档属于什么MIME类型。Servlet默认为text/plain，但通常需要显式地指定为text/html。由于经常要设置Content-Type，因此HttpServletResponse提供了一个专用的方法setContentType。</td>
</tr>
<tr>
<td style="text-align:left">Date</td>
<td style="text-align:left">当前的GMT时间。你可以用setDateHeader来设置这个头以避免转换时间格式的麻烦。</td>
</tr>
<tr>
<td style="text-align:left">Expires</td>
<td style="text-align:left">应该在什么时候认为文档已经过期，从而不再缓存它？</td>
</tr>
<tr>
<td style="text-align:left">Last-Modified</td>
<td style="text-align:left">文档的最后改动时间。客户可以通过If-Modified-Since请求头提供一个日期，该请求将被视为一个条件GET，只有改动时间迟于指定时间的文档才会返回，否则返回一个304（Not Modified）状态。Last-Modified也可用setDateHeader方法来设置。</td>
</tr>
<tr>
<td style="text-align:left">Location</td>
<td style="text-align:left">表示客户应当到哪里去提取文档。Location通常不是直接设置的，而是通过HttpServletResponse的sendRedirect方法，该方法同时设置状态代码为302。</td>
</tr>
<tr>
<td style="text-align:left">Refresh</td>
<td style="text-align:left">表示浏览器应该在多少时间之后刷新文档，以秒计。除了刷新当前文档之外，你还可以通过setHeader(“Refresh”, “5; URL=<a href="http://host/path&quot;)让浏览器读取指定的页面。" target="_blank" rel="noopener">http://host/path&quot;)让浏览器读取指定的页面。</a>  注意这种功能通常是通过设置HTML页面HEAD区的＜META HTTP-EQUIV=”Refresh” CONTENT=”5;URL=<a href="http://host/path&quot;＞实现，这是因为，自动刷新或重定向对于那些不能使用CGI或Servlet的HTML编写者十分重要。但是，对于Servlet来说，直接设置Refresh头更加方便。" target="_blank" rel="noopener">http://host/path&quot;＞实现，这是因为，自动刷新或重定向对于那些不能使用CGI或Servlet的HTML编写者十分重要。但是，对于Servlet来说，直接设置Refresh头更加方便。</a>   注意Refresh的意义是”N秒之后刷新本页面或访问指定页面”，而不是”每隔N秒刷新本页面或访问指定页面”。因此，连续刷新要求每次都发送一个Refresh头，而发送204状态代码则可以阻止浏览器继续刷新，不管是使用Refresh头还是＜META HTTP-EQUIV=”Refresh” …＞。   注意Refresh头不属于HTTP 1.1正式规范的一部分，而是一个扩展，但Netscape和IE都支持它。</td>
</tr>
<tr>
<td style="text-align:left">Server</td>
<td style="text-align:left">服务器名字。Servlet一般不设置这个值，而是由Web服务器自己设置。</td>
</tr>
<tr>
<td style="text-align:left">Set-Cookie</td>
<td style="text-align:left">设置和页面关联的Cookie。Servlet不应使用response.setHeader(“Set-Cookie”, …)，而是应使用HttpServletResponse提供的专用方法addCookie。参见下文有关Cookie设置的讨论。</td>
</tr>
<tr>
<td style="text-align:left">WWW-Authenticate</td>
<td style="text-align:left">客户应该在Authorization头中提供什么类型的授权信息？在包含401（Unauthorized）状态行的应答中这个头是必需的。例如，response.setHeader(“WWW-Authenticate”, “BASIC realm=＼”executives＼””)。  注意Servlet一般不进行这方面的处理，而是让Web服务器的专门机制来控制受密码保护页面的访问（例如.htaccess）。</td>
</tr>
</tbody>
</table>
<h2 id="HTTP1-0"><a href="#HTTP1-0" class="headerlink" title="HTTP1.0"></a>HTTP1.0</h2><p>早先<code>1.0</code>的<code>HTTP</code>版本，是一种<strong>无状态、无连接</strong>的应用层协议。</p>
<p><code>HTTP1.0</code>规定浏览器和服务器保持短暂的连接，浏览器的每次请求都需要与服务器建立一个<code>TCP</code>连接，服务器处理完成后立即断开<code>TCP</code>连接（无连接），服务器不跟踪每个客户端也不记录过去的请求（无状态）。</p>
<p>这种无状态性可以借助<code>cookie/session</code>机制来做身份认证和状态记录。而下面两个问题就比较麻烦了。</p>
<p>首先，无连接的特性导致最大的性能缺陷就是<strong>无法复用连接</strong>。每次发送请求的时候，都需要进行一次<code>TCP</code>的连接，而<code>TCP</code>的连接释放过程又是比较费事的。这种无连接的特性会使得网络的利用率非常低。</p>
<p>其次就是<strong>队头阻塞</strong>（<code>head of line blocking</code>）。由于<code>HTTP1.0</code>规定下一个请求必须在前一个请求响应到达之前才能发送。假设前一个请求响应一直不到达，那么下一个请求就不发送，同样的后面的请求也给阻塞了。</p>
<p>为了解决这些问题，<code>HTTP1.1</code>出现了。</p>
<h2 id="HTTP1-1"><a href="#HTTP1-1" class="headerlink" title="HTTP1.1"></a>HTTP1.1</h2><p>对于<code>HTTP1.1</code>，不仅继承了<code>HTTP1.0</code>简单的特点，还克服了诸多<code>HTTP1.0</code>性能上的问题。</p>
<p>首先是<strong>长连接</strong>，<code>HTTP1.1</code>增加了一个<code>Connection</code>字段，通过设置<code>Keep-Alive</code>可以保持<code>HTTP</code>连接不断开，避免了每次客户端与服务器请求都要重复建立释放建立<code>TCP</code>连接，提高了网络的利用率。如果客户端想关闭<code>HTTP</code>连接，可以在请求头中携带<code>Connection: false</code>来告知服务器关闭请求。</p>
<p>其次，是<code>HTTP1.1</code>支持请求<strong>管道化</strong>（<code>pipelining</code>）。基于<code>HTTP1.1</code>的长连接，使得请求管线化成为可能。管线化使得请求能够“并行”传输。举个例子来说，假如响应的主体是一个<code>html</code>页面，页面中包含了很多<code>img</code>，这个时候<code>keep-alive</code>就起了很大的作用，能够进行“并行”发送多个请求。（注意这里的“并行”并不是真正意义上的并行传输，具体解释如下。）</p>
<p>需要注意的是，<strong>服务器必须按照客户端请求的先后顺序依次回送相应的结果，以保证客户端能够区分出每次请求的响应内容。</strong></p>
<p>也就是说，<code>HTTP</code>管道化可以让我们把先进先出队列从客户端（请求队列）迁移到服务端（响应队列）。</p>
<p><img src="https://segmentfault.com/img/remote/1460000013028803?w=869&amp;h=585" alt></p>
<p>如图所示，客户端同时发了两个请求分别来获取<code>html</code>和<code>css</code>，假如说服务器的<code>css</code>资源先准备就绪，服务器也会先发送<code>html</code>再发送<code>css</code>。</p>
<p>换句话来说，只有等到<code>html</code>响应的资源完全传输完毕后，<code>css</code>响应的资源才能开始传输。也就是说，不允许同时存在两个<strong>并行的响应</strong>。</p>
<p>可见，<code>HTTP1.1</code>还是无法解决队头阻塞（<code>head of line blocking</code>）的问题。同时“管道化”技术存在各种各样的问题，所以很多浏览器要么根本不支持它，要么就直接默认关闭，并且开启的条件很苛刻…而且实际上好像并没有什么用处。</p>
<p>那我们在谷歌控制台看到的并行请求又是怎么一回事呢？</p>
<p><img src="https://segmentfault.com/img/remote/1460000014217953?w=581&amp;h=292" alt></p>
<p>如图所示，绿色部分代表请求发起到服务器响应的一个等待时间，而蓝色部分表示资源的下载时间。按照理论来说，HTTP响应理应当是前一个响应的资源下载完了，下一个响应的资源才能开始下载。而这里却出现了响应资源下载并行的情况。这又是为什么呢？</p>
<p>其实，虽然<code>HTTP1.1</code>支持管道化，但是服务器也必须进行逐个响应的送回，这个是很大的一个缺陷。实际上，现阶段的浏览器厂商采取了另外一种做法，它允许我们打开多个TCP的会话。也就是说，上图我们看到的并行，其实是不同的TCP连接上的<code>HTTP</code>请求和响应。这也就是我们所熟悉的浏览器对同域下并行加载6~8个资源的限制。而这，才是真正的<strong>并行</strong>！</p>
<p>此外，<code>HTTP1.1</code>还加入了<strong>缓存处理（强缓存和协商缓存[传送门]）</strong>新的字段如<code>cache-control</code>，支持<strong>断点传输</strong>，以及增加了<strong>Host字段</strong>（使得一个服务器能够用来创建多个Web站点）。</p>
<h2 id="HTTP2-0"><a href="#HTTP2-0" class="headerlink" title="HTTP2.0"></a>HTTP2.0</h2><p><code>HTTP2.0</code>的新特性大致如下：</p>
<p><strong>二进制分帧</strong></p>
<p><code>HTTP2.0</code>通过在应用层和传输层之间增加一个二进制分帧层，突破了<code>HTTP1.1</code>的性能限制、改进传输性能。</p>
<p><img src="https://segmentfault.com/img/remote/1460000013028804?w=625&amp;h=324" alt></p>
<p>可见，虽然<code>HTTP2.0</code>的协议和<code>HTTP1.x</code>协议之间的规范完全不同了，但是实际上<code>HTTP2.0</code>并没有改变<code>HTTP1.x</code>的语义。<br>简单来说，<code>HTTP2.0</code>只是把原来<code>HTTP1.x</code>的<code>header</code>和<code>body</code>部分用<code>frame</code>重新封装了一层而已。</p>
<p><strong>多路复用（连接共享）</strong></p>
<p>下面是几个概念：</p>
<ul>
<li>流（<code>stream</code>）：已建立连接上的双向字节流。</li>
<li>消息：与逻辑消息对应的完整的一系列数据帧。</li>
<li>帧（<code>frame</code>）：<code>HTTP2.0</code>通信的最小单位，每个帧包含帧头部，至少也会标识出当前帧所属的流（<code>stream id</code>）。</li>
</ul>
<p><img src="https://segmentfault.com/img/remote/1460000013028805?w=479&amp;h=391" alt></p>
<p>从图中可见，所有的<code>HTTP2.0</code>通信都在一个<code>TCP</code>连接上完成，这个连接可以承载任意数量的双向数据流。</p>
<p>每个数据流以消息的形式发送，而消息由一或多个帧组成。这些帧可以乱序发送，然后再根据每个帧头部的流标识符（<code>stream id</code>）重新组装。</p>
<p>举个例子，每个请求是一个数据流，数据流以消息的方式发送，而消息又分为多个帧，帧头部记录着<code>stream id</code>用来标识所属的数据流，不同属的帧可以在连接中随机混杂在一起。接收方可以根据<code>stream id</code>将帧再归属到各自不同的请求当中去。</p>
<p>另外，多路复用（连接共享）可能会导致关键请求被阻塞。<code>HTTP2.0</code>里每个数据流都可以设置优先级和依赖，优先级高的数据流会被服务器优先处理和返回给客户端，数据流还可以依赖其他的子数据流。</p>
<p>可见，<code>HTTP2.0</code>实现了真正的并行传输，它能够在一个<code>TCP</code>上进行任意数量<code>HTTP</code>请求。而这个强大的功能则是基于“二进制分帧”的特性。</p>
<p><strong>头部压缩</strong></p>
<p>在<code>HTTP1.x</code>中，头部元数据都是以纯文本的形式发送的，通常会给每个请求增加500~800字节的负荷。</p>
<p>比如说<code>cookie</code>，默认情况下，浏览器会在每次请求的时候，把<code>cookie</code>附在<code>header</code>上面发送给服务器。（由于<code>cookie</code>比较大且每次都重复发送，一般不存储信息，只是用来做状态记录和身份认证）</p>
<p><code>HTTP2.0</code>使用<code>encoder</code>来减少需要传输的<code>header</code>大小，通讯双方各自<code>cache</code>一份<code>header fields</code>表，既避免了重复<code>header</code>的传输，又减小了需要传输的大小。高效的压缩算法可以很大的压缩<code>header</code>，减少发送包的数量从而降低延迟。</p>
<p><strong>服务器推送</strong></p>
<p>服务器除了对最初请求的响应外，服务器还可以额外的向客户端推送资源，而无需客户端明确的请求。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><strong>HTTP1.0</strong></p>
<ul>
<li>无状态、无连接</li>
</ul>
<p><strong>HTTP1.1</strong></p>
<ul>
<li>持久连接</li>
<li>请求管道化</li>
<li>增加缓存处理（新的字段如<code>cache-control</code>）</li>
<li>增加<code>Host</code>字段、支持断点传输等</li>
</ul>
<p><strong>HTTP2.0</strong></p>
<ul>
<li>二进制分帧</li>
<li>多路复用（或连接共享）</li>
<li>头部压缩</li>
<li>服务器推送</li>
</ul>
<h2 id="HTTPS和HTTP的区别："><a href="#HTTPS和HTTP的区别：" class="headerlink" title="HTTPS和HTTP的区别："></a>HTTPS和HTTP的区别：</h2><ul>
<li>https协议需要到ca申请证书，一般免费证书很少，需要交费。</li>
<li>HTTP协议运行在TCP之上，所有传输的内容都是明文，HTTPS运行在SSL/TLS之上，SSL/TLS运行在TCP之上，所有传输的内容都经过加密的。</li>
<li>http和https使用的是完全不同的连接方式用的端口也不一样，前者是80，后者是443。</li>
<li>http的连接很简单，是无状态的。</li>
<li>HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，要比http协议安全。</li>
<li>HTTPS是在HTTP的基础上和ssl/tls证书结合起来的一种协议,保证了传输过程中的安全性,减少了被恶意劫持的可能.很好的解决了解决了http的三个缺点（被监听、被篡改、被伪装）</li>
</ul>
<h2 id="HTTP的请求过程"><a href="#HTTP的请求过程" class="headerlink" title="HTTP的请求过程"></a>HTTP的请求过程</h2><ul>
<li>域名解析</li>
<li>TCP三次握手</li>
<li>发起HTTP请求</li>
</ul>
<h2 id="https建立连接过程"><a href="#https建立连接过程" class="headerlink" title="https建立连接过程"></a>https建立连接过程</h2><p><img src="https://upload-images.jianshu.io/upload_images/9294298-c88d2dd40510eddb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/648/format/webp" alt></p>
<h5 id="2-2-1-客户端访问https连接"><a href="#2-2-1-客户端访问https连接" class="headerlink" title="2.2.1 客户端访问https连接"></a>2.2.1 客户端访问https连接</h5><p>这一步，就是相当于我们在浏览器上输入url回车的过程。这个时候浏览器或者客户端（接下来统一为客户端）会把我们客户端支持的加密算法Cipher Suite（密钥算法套件）带给服务端。</p>
<h5 id="2-2-2-2-2-3-服务端发送证书（公钥）给客户端"><a href="#2-2-2-2-2-3-服务端发送证书（公钥）给客户端" class="headerlink" title="2.2.2 - 2.2.3 服务端发送证书（公钥）给客户端"></a>2.2.2 - 2.2.3 服务端发送证书（公钥）给客户端</h5><p>服务端接收Cipher后，和自己支持的加密算法进行比对，如果不符合，则断开连接。否则，服务端会把符合的算法和证书发给客户端，包括证书时间、证书日期、证书颁发的机构。</p>
<h5 id="2-2-4-2-2-5-客户端验证服务端的证书"><a href="#2-2-4-2-2-5-客户端验证服务端的证书" class="headerlink" title="2.2.4- 2.2.5 客户端验证服务端的证书"></a>2.2.4- 2.2.5 客户端验证服务端的证书</h5><p>1、客户端验证证书，包括颁发证书的机构是否合法与是否过期，证书中包含的网站地址是否与正在访问的地址一致等</p>
<p>2、验证通过后（或者用户接受了不信任的证书），客户端会生成一个随机字符串，然后用服务端的公钥进行加密。这里就保证了只有服务端才能看到这串随机字符串（因为服务端拥有公钥对应的私钥，RSA解密，可以知道客户端的随机字符串）。</p>
<p>3、生成握手信息  用约定好的HASH算法，对握手信息进行取HASH，然后用随机字符串加密握手信息和握手信息的签名HASH值，把结果发给服务端。这里之所以要带上握手信息的HASH是因为，防止信息被篡改。如果信息被篡改，那么服务端接收到信息进行HASH时，就会发现HASH值和客户端传回来的不一样。这里就保证了信息不会被篡改。</p>
<h5 id="2-2-6-2-2-7-服务端接收加密信息，解密得到客户端提供的随机字符串"><a href="#2-2-6-2-2-7-服务端接收加密信息，解密得到客户端提供的随机字符串" class="headerlink" title="2.2.6 - 2.2.7 服务端接收加密信息，解密得到客户端提供的随机字符串"></a>2.2.6 - 2.2.7 服务端接收加密信息，解密得到客户端提供的随机字符串</h5><p>服务端接收到加密信息后，首先用私钥解密得到随机字符串。然后用随机字符串解密握手信息，获得握手信息和握手信息的HASH值，服务端对握手信息进行HASH，比对客户端传回来的HASH。如果相同，则说明信息没有被篡改。</p>
<p>服务端验证完客户端的信息以后，同样使用随机字符串加密握手信息和握手信息的HASH值发给客户端。</p>
<h5 id="2-2-8-客户端验证服务端返回的握手信息，完成握手"><a href="#2-2-8-客户端验证服务端返回的握手信息，完成握手" class="headerlink" title="2.2.8 客户端验证服务端返回的握手信息，完成握手"></a>2.2.8 客户端验证服务端返回的握手信息，完成握手</h5><p>客户端接收到服务端发回来的握手信息后，用一开始生成的随机字符串对密文进行解密，得到握手信息和握手信息的HASH值，像一步服务端验证一样对握手信息进行校验，校验通过后，握手完毕。从这里开始，客户端和服务端的通信就使用那串随机字符串进行AES对称加密通信。</p>
<h4 id="2-3-验证总结"><a href="#2-3-验证总结" class="headerlink" title="2.3 验证总结"></a>2.3 验证总结</h4><p>使用RSA非对称算法，服务端向客户端发送公钥，公钥包含了域名、颁发机构、过期日期。保证了公钥的合法性和服务端的身份正确性（而不会被黑客冒充）<br> 客户端向第三方验证公钥的合法性，验证通过后向服务端约定对称加密的随机字符号。保证了随机字符串只有通信双方知道。<br> 接下来的通信就使用这个随机字符号进行加密通信。因为随机字符串只有双方知道，所以信息不会被截获。</p>
<p><a href="https://segmentfault.com/a/1190000013028798" target="_blank" rel="noopener">https://segmentfault.com/a/1190000013028798</a></p>
<p><a href="https://www.ibm.com/developerworks/cn/web/wa-http2-under-the-hood/index.html" target="_blank" rel="noopener">https://www.ibm.com/developerworks/cn/web/wa-http2-under-the-hood/index.html</a></p>
<p><a href="https://www.jianshu.com/p/33d0f8631f90" target="_blank" rel="noopener">https://www.jianshu.com/p/33d0f8631f90</a></p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/http-web/" rel="tag"># http web</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/04/15/http协议无状态的含义/" rel="next" title="http协议无状态的含义">
                <i class="fa fa-chevron-left"></i> http协议无状态的含义
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/05/28/koa-session2源码分析与使用方法/" rel="prev" title="koa-session2源码分析与使用方法">
                koa-session2源码分析与使用方法 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="HuangJunjie">
            
              <p class="site-author-name" itemprop="name">HuangJunjie</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">2</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">2</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/Huang-Junjie" title="GitHub &rarr; https://github.com/Huang-Junjie" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-简介"><span class="nav-number">1.</span> <span class="nav-text">HTTP 简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-工作原理"><span class="nav-number">2.</span> <span class="nav-text">HTTP 工作原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-消息结构"><span class="nav-number">3.</span> <span class="nav-text">HTTP 消息结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#客户端请求消息"><span class="nav-number">3.1.</span> <span class="nav-text">客户端请求消息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#服务器响应消息"><span class="nav-number">3.2.</span> <span class="nav-text">服务器响应消息</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP状态码"><span class="nav-number">4.</span> <span class="nav-text">HTTP状态码</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP状态码分类"><span class="nav-number">4.1.</span> <span class="nav-text">HTTP状态码分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常见HTTP状态码列表"><span class="nav-number">4.2.</span> <span class="nav-text">常见HTTP状态码列表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常用的HTTP请求头"><span class="nav-number">4.3.</span> <span class="nav-text">常用的HTTP请求头</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常用的HTTP响应头"><span class="nav-number">4.4.</span> <span class="nav-text">常用的HTTP响应头</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP1-0"><span class="nav-number">5.</span> <span class="nav-text">HTTP1.0</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP1-1"><span class="nav-number">6.</span> <span class="nav-text">HTTP1.1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP2-0"><span class="nav-number">7.</span> <span class="nav-text">HTTP2.0</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#总结"><span class="nav-number">7.1.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTPS和HTTP的区别："><span class="nav-number">8.</span> <span class="nav-text">HTTPS和HTTP的区别：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP的请求过程"><span class="nav-number">9.</span> <span class="nav-text">HTTP的请求过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#https建立连接过程"><span class="nav-number">10.</span> <span class="nav-text">https建立连接过程</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2-2-1-客户端访问https连接"><span class="nav-number">10.0.0.1.</span> <span class="nav-text">2.2.1 客户端访问https连接</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-2-2-2-2-3-服务端发送证书（公钥）给客户端"><span class="nav-number">10.0.0.2.</span> <span class="nav-text">2.2.2 - 2.2.3 服务端发送证书（公钥）给客户端</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-2-4-2-2-5-客户端验证服务端的证书"><span class="nav-number">10.0.0.3.</span> <span class="nav-text">2.2.4- 2.2.5 客户端验证服务端的证书</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-2-6-2-2-7-服务端接收加密信息，解密得到客户端提供的随机字符串"><span class="nav-number">10.0.0.4.</span> <span class="nav-text">2.2.6 - 2.2.7 服务端接收加密信息，解密得到客户端提供的随机字符串</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-2-8-客户端验证服务端返回的握手信息，完成握手"><span class="nav-number">10.0.0.5.</span> <span class="nav-text">2.2.8 客户端验证服务端返回的握手信息，完成握手</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-验证总结"><span class="nav-number">10.0.1.</span> <span class="nav-text">2.3 验证总结</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">HuangJunjie</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">22k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">20 分钟</span>
  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.0.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/schemes/muse.js?v=7.0.1"></script>




  
  <script src="/js/src/scrollspy.js?v=7.0.1"></script>
<script src="/js/src/post-details.js?v=7.0.1"></script>



  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  

  

  

  


  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
